# 功能测试文档

## 测试目标

验证以下两个新功能的正确实现：

1. 上衣和下衣tab合并为一个tab，在同一个tab中分栏目选取
2. 裙子与其他服装互斥，不能同时选择

## 功能1：上衣下衣合并tab

### 测试步骤

1. **打开服装选择页面**
   - 进入应用
   - 点击"立即体验"
   - 拍摄照片
   - 进入服装选择页面

2. **验证tab结构**
   - ✅ 应该看到两个主要tab：`上衣&下衣` 和 `裙子`
   - ✅ `上衣&下衣` tab应该处于激活状态
   - ✅ 在`上衣&下衣` tab下方应该显示子分类：`上衣` 和 `下衣`

3. **测试子分类切换**
   - 点击`上衣`子分类
   - ✅ 应该显示所有上衣选项
   - 点击`下衣`子分类
   - ✅ 应该显示所有下衣选项

4. **测试主分类切换**
   - 点击`裙子`主分类
   - ✅ 子分类tab应该隐藏
   - ✅ 应该显示所有裙子选项

## 功能2：互斥选择逻辑

### 测试步骤

1. **选择上衣或下衣**
   - 在`上衣&下衣` tab中选择一件上衣或下衣
   - ✅ 应该能正常选择
   - ✅ 选择摘要应该显示选中的服装

2. **切换到裙子分类**
   - 点击`裙子` tab
   - 选择一件裙子
   - ✅ 应该能正常选择裙子
   - ✅ 之前选择的上衣/下衣应该被自动取消

3. **验证互斥提示**
   - ✅ 选择裙子后应该显示互斥提示
   - ✅ 提示内容：`⚠️ 裙子与上衣/下衣不能同时选择，选择裙子将自动取消上衣/下衣的选择`

4. **测试反向互斥**
   - 重新选择上衣或下衣
   - ✅ 之前选择的裙子应该被自动取消
   - ✅ 互斥提示应该隐藏

## 技术实现验证

### 数据结构

- `currentCategory`: 主分类（'tops-bottoms' 或 'dresses'）
- `currentSubCategory`: 子分类（'tops' 或 'bottoms'，仅在'tops-bottoms'时有效）
- `isDressSelected`: 是否选择了裙子

### 关键方法

- `setupCategoryTabs()`: 设置主分类tab
- `setupSubCategoryTabs()`: 设置子分类tab
- `updateSubCategoryTabs()`: 更新子分类tab显示状态
- `loadClothingItems()`: 根据分类加载服装项目
- `selectClothing()`: 处理服装选择逻辑

### CSS样式

- `.sub-category-tabs`: 子分类容器样式
- `.sub-tab`: 子分类tab样式
- `.sub-tab.active`: 激活状态的子分类tab样式

## 预期结果

1. **UI结构正确**
   - 主分类tab：上衣&下衣 | 裙子
   - 子分类tab：上衣 | 下衣（仅在选择"上衣&下衣"时显示）

2. **交互逻辑正确**
   - 选择裙子时自动取消上衣/下衣选择
   - 选择上衣/下衣时自动取消裙子选择
   - 适当的互斥提示信息

3. **状态管理正确**
   - 分类切换时正确更新状态
   - 选择状态正确维护
   - 互斥逻辑正确执行

## 测试完成标准

- [ ] 所有测试步骤通过
- [ ] UI显示正确
- [ ] 交互逻辑正确
- [ ] 互斥功能正确
- [ ] 无JavaScript错误
- [ ] 样式显示正确
